<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probabilistic Modeling: Expected Cost Simulation</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
</head>
<body>
    <div class="container">
        <h1>ðŸ’Š Drug Development Cost Simulation (Random Walk)</h1>
        <p>Compare the analytic solution (Gambler's Ruin Expected Duration) with a Monte Carlo simulation.</p>

        <div class="input-grid">
            <div class="input-group">
                <label for="maxState">Max State (Success, N):</label>
                <input type="number" id="maxState" value="4" min="1" step="1">
            </div>
            <div class="input-group">
                <label for="startState">Start State (nâ‚€):</label>
                <input type="number" id="startState" value="2" min="1" step="1">
            </div>
            <div class="input-group">
                <label for="probP">Prob. Up (p):</label>
                <input type="number" id="probP" value="0.66667" min="0.001" max="0.999" step="0.00001">
            </div>
            <div class="input-group">
                <label for="costC">Cost Per Transition (C):</label>
                <input type="number" id="costC" value="6000" min="1">
            </div>
            <div class="input-group">
                <label for="numTrials">Number of Trials (T):</label>
                <input type="number" id="numTrials" value="75000" min="1000" max="100000" step="1000">
            </div>
        </div>

        <button onclick="runSimulation()">Run Simulation</button>

        <div class="results">
            <h2>ðŸ“Š Results</h2>
            <div class="result-box analytic-box">
                <h3>Analytic Expected Cost $E(n_0)$</h3>
                <p id="analyticResult">Awaiting Calculation...</p>
                <p class="analytic-formula-note">Note: Formula assumes p â‰  0.5.</p>
            </div>
            <div class="result-box simulation-box">
                <h3>Simulation Avg. Cost</h3>
                <p id="simulationResult">Run simulation to see result...</p>
            </div>
        </div>

        <div id="empiricalStats" class="results" style="display:none; margin-top: 20px;">
            <h2>ðŸ”¬ Empirical Distribution Statistics</h2>
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>Mean</th>
                        <th>Standard Dev.</th>
                        <th>Min</th>
                        <th>Q1</th>
                        <th>Median (Q2)</th>
                        <th>Q3</th>
                        <th>Max</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="statsRow">
                        <td id="stat_mean"></td>
                        <td id="stat_stddev"></td>
                        <td id="stat_min"></td>
                        <td id="stat_q1"></td>
                        <td id="stat_median"></td>
                        <td id="stat_q3"></td>
                        <td id="stat_max"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="chart-container">
            <h2>Cost Distribution Histogram</h2>
            <canvas id="costHistogram" width="850" height="450"></canvas>
        </div>
        
    </div>

    <script src="script.js"></script>
</body>
</html>
